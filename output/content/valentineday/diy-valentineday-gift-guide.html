<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    
    <!-- SEO Meta Tags -->
    <meta content="Meaningful DIY Valentine’s Day gift ideas. From handwritten letters to memory jars, discover handmade gifts that mean more than anything store-bought." name="description"/>
    <meta content="DIY Valentine's gifts, handmade Valentine ideas, sentimental gifts, homemade Valentine's presents, creative relationship gifts, memory jar ideas, DIY coupon book" name="keywords"/>
    <meta content="DIY Gift Guide" name="author"/>
    
    <title>DIY Valentine’s Gifts | Handmade &amp; Heartfelt</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet"/>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-rose-50 text-slate-900 selection:bg-rose-200 selection:text-rose-900 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="relative py-20 px-6 text-center overflow-hidden bg-white/50 border-b border-rose-100">
        <div class="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none select-none">
            <i class="absolute top-10 left-10 w-24 h-24 transform -rotate-12 text-rose-900" data-lucide="scissors"></i>
            <i class="absolute bottom-10 right-10 w-36 h-36 transform rotate-6 text-rose-900" data-lucide="pen-tool"></i>
        </div>
        <div class="relative z-10 max-w-3xl mx-auto">
            <h1 class="text-4xl md:text-6xl font-extrabold text-slate-900 mb-6 tracking-tight">
                Made with <span class="text-transparent bg-clip-text bg-gradient-to-r from-rose-500 to-pink-600">Love</span>
            </h1>
            <p class="text-lg md:text-xl text-slate-600 leading-relaxed mb-4">
                Handmade gifts aren't meant to be perfect, they're about the effort, thoughtfulness, and the message 'I made this with you in mind.'
            </p>
            <div class="inline-block px-4 py-1 bg-white rounded-full border border-rose-200 text-rose-600 text-sm font-medium">
                Meaning &gt; Money
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-6 -mt-8 relative z-20 flex-grow w-full">
        
        <!-- Controls Bar -->
        <div class="bg-white rounded-2xl shadow-lg p-4 mb-10 flex flex-col md:flex-row items-center justify-between gap-4 border border-slate-100">
            
            <!-- Filters -->
            <div class="flex items-center gap-2 overflow-x-auto w-full md:w-auto pb-2 md:pb-0 scrollbar-hide" id="category-filters">
                <i class="text-slate-400 mr-2 flex-shrink-0 w-5 h-5" data-lucide="filter"></i>
                <!-- Buttons injected by JS -->
            </div>

            <!-- Actions -->
            <div class="flex items-center gap-3 w-full md:w-auto">
                <button class="flex-1 md:flex-none flex items-center justify-center gap-2 px-5 py-2.5 bg-rose-50 text-rose-600 rounded-xl hover:bg-rose-100 font-medium transition-colors" onclick="pickRandom()">
                    <i class="w-4 h-4" data-lucide="sparkles"></i>
                    <span>Project Idea</span>
                </button>
                
                <button class="flex-1 md:flex-none flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl font-medium transition-colors bg-white border border-slate-200 text-slate-600 hover:border-rose-300 hover:text-rose-600" id="btn-saved-view" onclick="toggleSavedView()">
                    <i class="w-4 h-4" data-lucide="bookmark"></i>
                    <span id="saved-count-text">Saved (0)</span>
                </button>
            </div>
        </div>

        <!-- Saved View (Hidden by default) -->
        <div class="hidden mb-12 fade-in" id="saved-view">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-slate-800">Your DIY Projects</h2>
                <button class="text-sm text-rose-500 hover:text-rose-700 underline decoration-dotted" onclick="clearFavorites()">Clear all</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="saved-grid">
                <!-- Saved items injected here -->
            </div>
            <div class="h-px bg-slate-200 w-full my-10"></div>
        </div>

        <!-- Empty State for Saved View -->
        <div class="hidden text-center py-12 bg-white rounded-2xl border-2 border-dashed border-slate-200 mb-12" id="saved-empty">
            <div class="flex justify-center mb-4"><i class="w-12 h-12 text-slate-200" data-lucide="bookmark"></i></div>
            <p class="text-slate-500">You haven't saved any projects yet. Remember to save the ones you want to create!</p>
            <div class="h-px bg-slate-200 w-full mt-10"></div>
        </div>

        <!-- Main Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="ideas-grid">
            <!-- Cards injected by JS -->
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-300">
<div class="container mx-auto px-6 py-12 lg:px-8">
<div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4">
<div>
<h5 class="text-lg font-semibold text-white mb-4">Happy Deppawali</h5>
<ul class="space-y-2">
<li>
<a href="https://www.happydeepawali.org/">/</a>
<span class="meta">2026-01-08</span>
</li>
<li>
<a href="https://www.happydeepawali.org/5-days-of-diwali.html">5-days-of-diwali.html</a>
<span class="meta">2025-09-27</span>
</li>
<li>
<a href="https://www.happydeepawali.org/Diwali-16-current.html">Diwali-16-current.html</a>
<span class="meta">2025-09-27</span>
</li>
<li>
<a href="https://www.happydeepawali.org/Hindu-festivals-list-and-dates/">Hindu-festivals-list-and-dates/</a>
<span class="meta">2025-09-27</span>
</li>
<li>
<a href="https://www.happydeepawali.org/Hindu-festivals-list-and-dates/Brother-Sister-festival.html">Hindu-festivals-list-and-dates/Brother-Sister-festival.html</a>
<span class="meta">2025-09-27</span>
</li>
<li>
<a href="https://www.happydeepawali.org/Hindu-festivals-list-and-dates/Dhanteras-to-Bhaiduj.html">Hindu-festivals-list-and-dates/Dhanteras-to-Bhaiduj.html</a>
<span class="meta">2025-09-27</span>
</li>
<li>
<a href="https://www.happydeepawali.org/Hindu-festivals-list-and-dates/Diwali/Dhanteras-16.html">Hindu-festivals-list-and-dates/Diwali/Dhanteras-16.html</a>
<span class="meta">2025-09-27</span>
</li>
</ul>
</div>
<div>
<h5 class="text-lg font-semibold text-white mb-4">Karwa Chauth</h5>
<ul class="space-y-2">
<li>
<a href="https://www.happydeepawali.org/karwa-chauth/wishes-in-rajasthani.html">karwa-chauth/wishes-in-rajasthani.html</a>
<span class="meta">2025-09-27</span>
</li>
<li>
<a href="https://www.happydeepawali.org/karwa-chauth/wishes-in-tamil.html">karwa-chauth/wishes-in-tamil.html</a>
<span class="meta">2025-09-27</span>
</li>
<li>
<a href="https://www.happydeepawali.org/karwa-chauth/wishes-in-telugu.html">karwa-chauth/wishes-in-telugu.html</a>
<span class="meta">2025-09-27</span>
</li>
<li>
<a href="https://www.happydeepawali.org/karwa-chauth/wishes-karwa-chauth.html">karwa-chauth/wishes-karwa-chauth.html</a>
<span class="meta">2025-09-27</span>
</li>
<li>
<a href="https://www.happydeepawali.org/karwa-chauth/wishes.html">karwa-chauth/wishes.html</a>
<span class="meta">2025-09-27</span>
</li>
<li>
<a href="https://www.happydeepawali.org/karwachauth/2025/karwa-chauth-moon-rise-canada.html">karwachauth/2025/karwa-chauth-moon-rise-canada.html</a>
<span class="meta">2025-09-27</span>
</li>
<li>
<a href="https://www.happydeepawali.org/karwachauth/2025/karwa-chauth-moon-rise-india.html">karwachauth/2025/karwa-chauth-moon-rise-india.html</a>
<span class="meta">2025-09-27</span>
</li>
</ul>
</div>
<div>
<h5 class="text-lg font-semibold text-white mb-4">Makar Sankranti</h5>
<ul class="space-y-2">
<li>
<a href="https://www.happydeepawali.org/makar-sankranti/makar-sankranti-blog-photos.html">makar-sankranti/makar-sankranti-blog-photos.html</a>
<span class="meta">2026-01-08</span>
</li>
<li>
<a href="https://www.happydeepawali.org/makar-sankranti/makarsankranti-blog.html">makar-sankranti/makarsankranti-blog.html</a>
<span class="meta">2026-01-08</span>
</li>
<li>
<a href="https://www.happydeepawali.org/makar-sankranti/makarsankranti-cards.html">makar-sankranti/makarsankranti-cards.html</a>
<span class="meta">2026-01-08</span>
</li>
<li>
<a href="https://www.happydeepawali.org/makar-sankranti/makarsankranti-essay.html">makar-sankranti/makarsankranti-essay.html</a>
<span class="meta">2026-01-08</span>
</li>
<li>
<a href="https://www.happydeepawali.org/makar-sankranti/makarsankranti-greeting-cards.html">makar-sankranti/makarsankranti-greeting-cards.html</a>
<span class="meta">2026-01-08</span>
</li>
<li>
<a href="https://www.happydeepawali.org/makar-sankranti/makarsankranti-guide.html">makar-sankranti/makarsankranti-guide.html</a>
<span class="meta">2026-01-08</span>
</li>
<li>
<a href="https://www.happydeepawali.org/makar-sankranti/makarsankranti-play-script.html">makar-sankranti/makarsankranti-play-script.html</a>
<span class="meta">2026-01-08</span>
</li>
</ul>
</div>
<div>
<h5 class="text-lg font-semibold text-white mb-4">Contact Us</h5>
<div class="space-y-2">
<p>Redmond<br/>WA, USA</p>
<p>
<a class="hover:text-white hover:underline transition-colors duration-200" href="mailto:contact@dataknobs.com">contact@dataknobs.com</a>
</p>
<p>
<a class="hover:text-white hover:underline transition-colors duration-200" href="tel:+14253411222">+1 (425) 341-1222</a>
</p>
</div>
</div>
</div>
<div class="mt-12 border-t border-gray-700 pt-8 flex flex-col items-center justify-between sm:flex-row">
<p class="text-sm text-gray-400">© Happy Deepawali. All rights reserved.</p>
<div class="flex gap-4 mt-4 sm:mt-0">
<a class="text-stone-400 hover:text-white" href="https://www.happydeepawali.org/privacypolicy,html">Privacy Policy</a> <!-- 13 -->
<a class="text-stone-400 hover:text-white" href="https://www.happydeepawali.org/sitemap.html">Sitemap</a> <!-- 14 -->
</div>
<div class="flex space-x-4 mt-4 sm:mt-0">
<a class="text-gray-400 hover:text-white transition-colors duration-200" href="https://www.facebook.com/kreatewebsites/">
<span class="sr-only">Facebook</span>
<svg aria-hidden="true" class="h-6 w-6" fill="currentColor" viewbox="0 0 24 24">
<path clip-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.772-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" fill-rule="evenodd"></path>
</svg>
</a>
<a class="text-gray-400 hover:text-white transition-colors duration-200" href="https://www.twitter.com/kreatewebsites/">
<span class="sr-only">Twitter</span>
<svg aria-hidden="true" class="h-6 w-6" fill="currentColor" viewbox="0 0 24 24">
<path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path>
</svg>
</a>
<a class="text-gray-400 hover:text-white transition-colors duration-200" href="https://www.linkedin.com/company/kreatewebsites/">
<span class="sr-only">LinkedIn</span>
<svg aria-hidden="true" class="h-6 w-6" fill="currentColor" viewbox="0 0 24 24">
<path clip-rule="evenodd" d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.783-1.75-1.75s.784-1.75 1.75-1.75 1.75.783 1.75 1.75-.784 1.75-1.75 1.75zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" fill-rule="evenodd"></path>
</svg>
</a>
</div>
</div>
</div>
</footer>

    <!-- Modal -->
    <div class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm transition-opacity opacity-0" id="modal-overlay" onclick="closeModal()">
        <div class="bg-white rounded-3xl max-w-lg w-full p-8 relative shadow-2xl transform scale-95 transition-transform" id="modal-content" onclick="event.stopPropagation()">
            <button class="absolute top-4 right-4 p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors" onclick="closeModal()">
                <i class="w-6 h-6" data-lucide="x"></i>
            </button>

            <div class="flex items-center gap-4 mb-6">
                <div class="p-4 bg-rose-100 rounded-2xl">
                    <i class="w-8 h-8 text-rose-600" id="modal-icon"></i>
                </div>
                <div>
                    <span class="text-sm font-semibold text-rose-500 uppercase tracking-wide" id="modal-category">Category</span>
                    <h2 class="text-2xl font-bold text-slate-900 leading-tight" id="modal-title">Title</h2>
                </div>
            </div>

            <div class="prose prose-rose">
                <p class="text-lg text-slate-700 leading-relaxed mb-6" id="modal-desc">Description goes here...</p>
                
                <div class="bg-rose-50 p-4 rounded-xl border border-rose-100">
                    <h4 class="font-bold text-rose-700 mb-2 flex items-center gap-2">
                        <i class="w-4 h-4" data-lucide="lightbulb"></i> How to Make It Special
                    </h4>
                    <ul class="list-disc list-inside text-slate-700 text-sm space-y-1 ml-1" id="modal-tips">
                        <!-- Tips injected here -->
                    </ul>
                </div>
            </div>

            <div class="mt-8 flex gap-3">
                <button class="flex-1 flex items-center justify-center gap-2 py-3 px-6 rounded-xl font-semibold transition-all bg-slate-100 text-slate-700 hover:bg-slate-200" id="modal-fav-btn" onclick="toggleFavoriteFromModal()">
                    <i class="w-5 h-5" data-lucide="bookmark"></i>
                    <span id="modal-btn-text">Save Project</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- Data ---
        const ideas = [
            { 
                id: 1, 
                title: "A Handwritten Letter (Done Right)", 
                description: "Few gifts are as powerful as honest words on paper. Write about specific moments, not generic compliments. Mention how they’ve impacted your life. Present it in a sealed envelope or frame it.", 
                tips: ["Write about specific moments", "Share what you appreciate right now", "Mention their impact on you"],
                icon: "pen-tool", 
                category: "Writing" 
            },
            { 
                id: 2, 
                title: "Memory Jar or Message Box", 
                description: "Create a jar filled with handwritten notes—memories, reasons you love them, or future plans. This gift keeps giving long after Valentine’s Day as they read them over time.", 
                tips: ["'One thing I admire about you...'", "'A moment I’ll never forget...'", "'Something I’m excited to do together...'"],
                icon: "archive", 
                category: "Crafting" 
            },
            { 
                id: 3, 
                title: "DIY Photo Book", 
                description: "Turn photos into a story instead of just printing them. Add captions with inside jokes, small notes next to each memory, and a final page about what you're excited to build together.", 
                tips: ["Include inside jokes in captions", "Write small notes next to memories", "End with a future-focused page"],
                icon: "image", 
                category: "Crafting" 
            },
            { 
                id: 4, 
                title: "Curated Playlist with Guide", 
                description: "Music is emotional. Choose songs tied to moments or moods, and include a short explanation for each track. Pair it with a handwritten note or custom cover art.", 
                tips: ["Choose songs tied to specific memories", "Write a sentence explaining each track", "Reflect where you are and where you're going"],
                icon: "music", 
                category: "Curated Box" 
            },
            { 
                id: 5, 
                title: "'Open When' Letters", 
                description: "Create a series of envelopes labeled for different moments (e.g., 'Open when you miss me', 'Open when you need encouragement'). It offers comfort exactly when they need it.", 
                tips: ["'Open when you miss me'", "'Open when you can't sleep'", "'Open when you need a laugh'"],
                icon: "mail", 
                category: "Writing" 
            },
            { 
                id: 6, 
                title: "Home-Cooked Meal or Treat", 
                description: "Food is meaningful when made with intention. Cook a dish tied to a memory or bake something they love but don't expect. Include a handwritten recipe card.", 
                tips: ["Cook a dish tied to a shared memory", "Bake a surprise favorite", "Write out the recipe card by hand"],
                icon: "chef-hat", 
                category: "Food" 
            },
            { 
                id: 7, 
                title: "DIY Coupon Book", 
                description: "Create coupons for things they genuinely value—a tech-free evening, a day planned by you, or a chore they dislike. The key is follow-through.", 
                tips: ["A day planned entirely by you", "A tech-free evening", "A specific chore/favor they dislike"],
                icon: "ticket", 
                category: "Crafting" 
            },
            { 
                id: 8, 
                title: "Personalized Care Package", 
                description: "Fill a box with items that reflect comfort and nostalgia. Include their favorite snacks, a small note for each item, and something cozy. Especially great for long-distance.", 
                tips: ["Include favorite snacks", "Attach a note to each item", "Add something cozy or sentimental"],
                icon: "package", 
                category: "Curated Box" 
            },
            { 
                id: 9, 
                title: "Simple DIY Experience", 
                description: "DIY doesn't always mean an object. Plan a themed movie night, a scavenger hunt, or a day built around their favorite things. Creating a moment is powerful.", 
                tips: ["Themed movie night at home", "Scavenger hunt with memories", "A planned day of their favorites"],
                icon: "calendar", 
                category: "Experience" 
            },
            { 
                id: 10, 
                title: "Mistakes to Avoid", 
                description: "Don't overcomplicate it or apologize for it being 'simple'. Avoid rushing without intention. Remember: Simplicity done thoughtfully always wins.", 
                tips: ["Don't apologize for simplicity", "Don't rush without intention", "Focus on meaning, not just effort"],
                icon: "alert-triangle", 
                category: "Writing" 
            }
        ];

        const categories = ["All", "Writing", "Crafting", "Food", "Experience", "Curated Box"];
        
        // --- State ---
        let activeCategory = "All";
        let favorites = JSON.parse(localStorage.getItem('diyValFavorites')) || [];
        let showSavedView = false;
        let currentModalId = null;

        // --- Init ---
        function init() {
            renderCategories();
            renderGrid();
            updateSavedButton();
            lucide.createIcons();
        }

        // --- Rendering ---
        function renderCategories() {
            const container = document.getElementById('category-filters');
            container.innerHTML = '<i data-lucide="filter" class="text-slate-400 mr-2 flex-shrink-0 w-5 h-5"></i>';
            
            categories.forEach(cat => {
                const btn = document.createElement('button');
                const isActive = activeCategory === cat;
                btn.className = `px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${isActive ? 'bg-rose-600 text-white shadow-md' : 'bg-white text-slate-600 hover:bg-rose-50 hover:text-rose-600 border border-slate-200'}`;
                btn.textContent = cat;
                btn.onclick = () => {
                    activeCategory = cat;
                    renderCategories();
                    renderGrid();
                };
                container.appendChild(btn);
            });
            lucide.createIcons();
        }

        function createCardHTML(idea, isFav) {
            return `
            <div onclick="openModal(${idea.id})" class="group relative bg-white rounded-2xl p-6 shadow-sm hover:shadow-xl transition-all duration-300 border border-rose-100 hover:border-rose-300 cursor-pointer flex flex-col h-full fade-in ${isFav ? 'ring-2 ring-rose-400' : ''}">
                <div class="absolute top-4 right-4 z-10">
                    <button onclick="event.stopPropagation(); toggleFavorite(${idea.id})" 
                        class="p-2 rounded-full transition-all ${isFav ? 'bg-rose-100 text-rose-600' : 'bg-gray-50 text-gray-400 hover:bg-rose-50 hover:text-rose-400'}">
                        <i data-lucide="bookmark" class="w-5 h-5 ${isFav ? 'fill-current' : ''}"></i>
                    </button>
                </div>
                <div class="mb-4 p-3 bg-rose-50 rounded-xl w-fit group-hover:bg-rose-100 transition-colors">
                    <i data-lucide="${idea.icon}" class="w-6 h-6 text-rose-600"></i>
                </div>
                <div class="mb-2">
                    <span class="text-xs font-medium uppercase tracking-wider text-rose-400">${idea.category}</span>
                </div>
                <h3 class="text-xl font-bold text-slate-800 mb-3 group-hover:text-rose-700 transition-colors">${idea.title}</h3>
                <p class="text-slate-600 leading-relaxed text-sm line-clamp-3">${idea.description}</p>
                <div class="mt-auto pt-4 flex items-center text-rose-600 font-medium text-sm opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0">
                    See Details <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                </div>
            </div>`;
        }

        function renderGrid() {
            const grid = document.getElementById('ideas-grid');
            grid.innerHTML = '';
            
            const filtered = activeCategory === "All" ? ideas : ideas.filter(i => i.category === activeCategory);
            
            filtered.forEach(idea => {
                grid.innerHTML += createCardHTML(idea, favorites.includes(idea.id));
            });
            lucide.createIcons();
        }

        function renderSaved() {
            const savedGrid = document.getElementById('saved-grid');
            const emptyState = document.getElementById('saved-empty');
            savedGrid.innerHTML = '';
            
            const savedIdeas = ideas.filter(i => favorites.includes(i.id));

            if (savedIdeas.length === 0) {
                savedGrid.parentElement.classList.add('hidden');
                emptyState.classList.remove('hidden');
            } else {
                savedGrid.parentElement.classList.remove('hidden');
                emptyState.classList.add('hidden');
                savedIdeas.forEach(idea => {
                    savedGrid.innerHTML += createCardHTML(idea, true);
                });
            }
            lucide.createIcons();
        }

        // --- Logic ---
        function toggleFavorite(id) {
            if (favorites.includes(id)) {
                favorites = favorites.filter(fid => fid !== id);
            } else {
                favorites.push(id);
            }
            localStorage.setItem('diyValFavorites', JSON.stringify(favorites));
            
            updateSavedButton();
            renderGrid();
            if (showSavedView) renderSaved();
            if (currentModalId === id) updateModalButton(id);
        }

        function updateSavedButton() {
            const btn = document.getElementById('btn-saved-view');
            const text = document.getElementById('saved-count-text');
            const icon = btn.querySelector('i');
            
            text.textContent = `Saved (${favorites.length})`;
            
            if (showSavedView) {
                btn.className = "flex-1 md:flex-none flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl font-medium transition-colors bg-rose-100 border border-rose-200 text-rose-700";
                icon.classList.add('fill-current');
            } else {
                btn.className = "flex-1 md:flex-none flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl font-medium transition-colors bg-white border border-slate-200 text-slate-600 hover:border-rose-300 hover:text-rose-600";
                icon.classList.remove('fill-current');
            }
            lucide.createIcons();
        }

        function toggleSavedView() {
            showSavedView = !showSavedView;
            const savedView = document.getElementById('saved-view');
            const savedEmpty = document.getElementById('saved-empty');
            
            updateSavedButton();
            
            if (showSavedView) {
                renderSaved();
                if(favorites.length === 0) {
                   savedView.classList.add('hidden');
                   savedEmpty.classList.remove('hidden');
                } else {
                   savedView.classList.remove('hidden');
                   savedEmpty.classList.add('hidden');
                }
            } else {
                savedView.classList.add('hidden');
                savedEmpty.classList.add('hidden');
            }
        }

        function clearFavorites() {
            favorites = [];
            localStorage.setItem('diyValFavorites', JSON.stringify(favorites));
            updateSavedButton();
            renderGrid();
            renderSaved();
        }

        function pickRandom() {
            const randomIdea = ideas[Math.floor(Math.random() * ideas.length)];
            openModal(randomIdea.id);
        }

        // --- Modal ---
        function openModal(id) {
            const idea = ideas.find(i => i.id === id);
            if (!idea) return;

            currentModalId = id;
            document.getElementById('modal-title').textContent = idea.title;
            document.getElementById('modal-desc').textContent = idea.description;
            document.getElementById('modal-category').textContent = idea.category;
            
            // Tips List
            const list = document.getElementById('modal-tips');
            list.innerHTML = '';
            idea.tips.forEach(tip => {
                const li = document.createElement('li');
                li.textContent = tip;
                list.appendChild(li);
            });

            const iconContainer = document.getElementById('modal-icon').parentElement;
            iconContainer.innerHTML = `<i data-lucide="${idea.icon}" class="w-8 h-8 text-rose-600"></i>`;

            updateModalButton(id);

            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');
            
            overlay.classList.remove('hidden');
            setTimeout(() => {
                overlay.classList.remove('opacity-0');
                content.classList.remove('scale-95');
                content.classList.add('scale-100');
            }, 10);
            
            lucide.createIcons();
        }

        function updateModalButton(id) {
            const isFav = favorites.includes(id);
            const btn = document.getElementById('modal-fav-btn');
            const txt = document.getElementById('modal-btn-text');
            const icon = btn.querySelector('i');

            if (isFav) {
                btn.className = "flex-1 flex items-center justify-center gap-2 py-3 px-6 rounded-xl font-semibold transition-all bg-rose-100 text-rose-700 hover:bg-rose-200";
                txt.textContent = "Saved to Plan";
                icon.classList.add('fill-current');
            } else {
                btn.className = "flex-1 flex items-center justify-center gap-2 py-3 px-6 rounded-xl font-semibold transition-all bg-slate-100 text-slate-700 hover:bg-slate-200";
                txt.textContent = "Save Project";
                icon.classList.remove('fill-current');
            }
            lucide.createIcons();
        }

        function toggleFavoriteFromModal() {
            if (currentModalId) toggleFavorite(currentModalId);
        }

        function closeModal() {
            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');
            
            overlay.classList.add('opacity-0');
            content.classList.remove('scale-100');
            content.classList.add('scale-95');
            
            setTimeout(() => {
                overlay.classList.add('hidden');
                currentModalId = null;
            }, 300);
        }

        init();
    </script>

</body></html>